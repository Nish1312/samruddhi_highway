<app-header></app-header>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-4 mt-5">
            <div class="card border-0 shadow p-3">
                <div class="form-floating mb-3">
                    <h5 class="text-center text-warning">Add Stop</h5>
                </div>
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="name" placeholder="name@example.com" [(ngModel)]="name">
                    <label for="name">Name</label>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="step" placeholder="name@example.com"
                                [(ngModel)]="step">
                            <label for="step">Step</label>
                        </div>
                    </div>
                    <div class="col">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="flexCheckIndeterminate"
                                [(ngModel)]="is_city">
                            <label class="form-check-label" for="flexCheckIndeterminate">
                                City
                            </label>
                        </div>
                    </div>
                </div>

                <div *ngIf="!is_city">
                    <div class="card border-0 shadow m-3" *ngFor="let count of imageManager; let i = index">
                        <div class="card-body">
                            <div>
                                <input type="file" class="text-nowrap text-truncate file" (change)="selectFile($event)">
                                <button type="button" class="btn btn-outline-warning" [disabled]="!selectedFiles"
                                    (click)="uploadFile()">Upload</button>
                                <button type="button" class="btn btn-outline-warning"
                                    (click)="removeImage(i)">Remove</button>
                            </div>

                            <div class="progress mt-2">
                                <div class="progress-bar progress-bar-info" role="progressbar"
                                    attr.aria-valuenow="{{percentage}}" aria-valuemin="0" aria-valuemax="100"
                                    [ngStyle]="{ width: percentage + '%' }">
                                    {{percentage}}%
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="!is_city">
                    <div class="card border-0 shadow m-3">
                        <div class="card-body">
                            <div>
                                <input type="file" class="text-nowrap text-truncate file" (change)="selectFile($event)">
                                <button type="button" class="btn btn-outline-warning" [disabled]="!selectedFiles"
                                    (click)="uploadFile()">Upload</button>
                            </div>

                            <div class="progress mt-2">
                                <div class="progress-bar progress-bar-info" role="progressbar"
                                    attr.aria-valuenow="{{percentage}}" aria-valuemin="0" aria-valuemax="100"
                                    [ngStyle]="{ width: percentage + '%' }">
                                    {{percentage}}%
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button type="button" class="btn btn-outline-warning" (click)="addImage()">Add Image</button>

                <button type="submit" class="btn btn-outline-success" (click)="addStop()">Add Stop</button>
            </div>
        </div>
        <div class="col-md-8 mt-5">
            <h5 class="text-denger">Stops List</h5>
            <div class="card p-3 shadow">
                <div class="card-body">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Step</th>
                                <th scope="col">Name</th>
                                <th scope="col">Is City</th>
                                <th scope="col">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let stop of stopList">
                                <td>{{stop.step}}</td>
                                <td>{{stop.name}}</td>
                                <td *ngIf="stop.is_city">Yes</td>
                                <td *ngIf="!stop.is_city">No</td>
                                <td>
                                    <button class="btn btn-outline-danger" (click)="deleteStop(stop)">Delete</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>